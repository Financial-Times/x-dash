@import 'o-icons/main';
@import 'o-colors/main';

$o-typography-load-fonts: false;
@import 'o-typography/main';
@include oTypography();

$height--minimised: 48px;
$info-height--expanded: 72px;

@mixin expandedButtonsStyle {
	border: none;
	width: 64px;
	height: 64px;
	background-color: oColorsGetPaletteColor('white');
	margin: 16px;
	border-radius: 32px;

	&:focus,
	&:hover{
		background-color: oColorsMix('black', 'white', 10);
	}
}

@mixin minimisedButtonsStyle {
	border: none;
	background-color: oColorsGetPaletteColor('slate');
	margin: 4px;
	border-radius: 20px;

	&:focus,
	&:hover{
		background-color: oColorsMix('slate', 'white', 80);
	}
}

.audio-player {
	display: grid;
	@include oTypographySans();
}

.audio-player--expanded {
	grid-template-columns: 1fr 1fr 1fr;
	grid-template-areas: ". minimise-button ."
	"info info info"
	"control-timeline control-timeline control-timeline"
	"status . remaining"
	"rewind play-pause forward"
	". control-speed .";
	padding: 0px 20px;
	min-height: 360px;
	border-radius: 10px 10px 0px 0px;
	background-color: oColorsGetPaletteColor('white');
	color: oColorsGetPaletteColor('black');
}

.audio-player--minimised {
	grid-template-columns: $height--minimised auto $height--minimised;
	grid-template-areas: "play-pause info close-button";
	height: $height--minimised;
	border-radius: 24px;
	background-color: oColorsGetPaletteColor('slate');
	color: oColorsGetPaletteColor('white');
}

.audio-player__play-pause {
	grid-area: play-pause;
	justify-self: center;

	.audio-player--expanded & {
		@include expandedButtonsStyle;
	}

	.audio-player--minimised & {
		@include minimisedButtonsStyle;
	}
}

.audio-player__play-pause--play {
	.audio-player--expanded & {
		@include oIconsGetIcon('play', oColorsGetPaletteColor('black'), 64);
	}

	.audio-player--minimised & {
		@include oIconsGetIcon('play', oColorsGetPaletteColor('white'), 36);
		background-size: 36px;
		background-position: center center;
		width: 40px;
		height: 40px;
	}
}

.audio-player__play-pause--pause {
	.audio-player--expanded & {
		@include oIconsGetIcon('pause', oColorsGetPaletteColor('black'), 64);
	}

	.audio-player--minimised & {
		@include oIconsGetIcon('pause', oColorsGetPaletteColor('white'), 36);
		background-size: 36px;
		background-position: center center;
		width: 40px;
		height: 40px;
	}
}

.audio-player__close {
	@include oIconsGetIcon('cross', oColorsGetPaletteColor('white'), 24);
	@include minimisedButtonsStyle;
	background-size: 24px;
	background-position: center center;
	width: 40px;
	height: 40px;
	grid-area: close-button;
}

.audio-player__rewind {
	@include oIconsGetIcon('skip-backward-30', oColorsGetPaletteColor('black'), 64);
	@include expandedButtonsStyle;
	grid-area: rewind;
	justify-self: end;
}

.audio-player__forward {
	@include oIconsGetIcon('skip-forward-30', oColorsGetPaletteColor('black'), 64);
	@include expandedButtonsStyle;
	grid-area: forward;
	justify-self: start;
}


.audio-player__minimise-button {
	@include oIconsGetIcon('arrow-down', oColorsMix('black', 'white', 20), 48);
	grid-area: minimise-button;
	justify-self: center;
	border: none;
	height: 48px;
}

.audio-player__control-timeline {
	grid-area: control-timeline;
	height: 20px;
	padding-top: 24px;
}

.audio-player__control-speed {
	@include oTypographySansBold($scale: 2);
	grid-area: control-speed;
	justify-self: center;
	height: 44px;
	width: 88px;
	margin: 16px 0px;
	border-radius: 22px;
	border: none;
	background-color: oColorsGetPaletteColor('teal');
	color: oColorsGetPaletteColor('white');
}

.audio-player__info {
	grid-area: info;
	display: grid;

	.audio-player--expanded & {
		height: $info-height--expanded;
		grid-template-columns: $info-height--expanded auto;
		grid-template-areas: "img title"
		"img series-name";
	}

	.audio-player--minimised & {
		min-height: 40px;
		grid-template-columns: min-content auto;
		grid-template-areas: "series-name title"
		"status status";
		margin-top: 4px;
		margin-bottom: 4px;
	}
}

.audio-player__info__title {
	grid-area: title;
	align-self: center;
	white-space: nowrap;
	overflow: hidden;

	.audio-player--expanded & {
		@include oTypographySansBold($scale: 0);
		margin-left: 10px;
	}

	.audio-player--minimised & {
		@include oTypographySansBold($scale: -1);
	}
}

.audio-player__info__series-name {
	@include oTypographySansBold($scale: -1);
	grid-area: series-name;
	align-self: center;

	.audio-player--expanded & {
		margin-left: 10px;
	}

	.audio-player--minimised & {
		margin-left: 8px;
		margin-right: 4px;
		white-space: nowrap;
	}
}

.audio-player__info__image {
	grid-area: img;
	width: $info-height--expanded;
	height: $info-height--expanded;
	background-color: orangered;
}

.audio-player__info__remaining {
	.audio-player--expanded & {
		@include oTypographySans($scale: -1);
		grid-area: remaining;
		justify-self: end;
		margin-bottom: 12px;
	}

	.audio-player--minimised & {
		@include oTypographySans($scale: -2);
		grid-area: status;
		align-self: center;
		margin-left: 8px;
	}
}

.audio-player__info__current-time {
	@include oTypographySans($scale: -1);
	grid-area: status;
	justify-self: start;
}

.audio-player__status {
	grid-area: status;
	@include oTypographySans($scale: -1);

	/* make the mini spinner smaller*/
	.audio-player__loader {
		width: 8px;
		height: 8px;
		margin-right: 4px;
	}
}

.audio-player__status--minimised {
	@include oTypographySize($scale: -2);
	display: flex;
	align-items: center;
	margin-left: 8px;
}
